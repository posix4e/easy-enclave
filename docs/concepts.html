<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Concepts - EasyEnclave</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”</text></svg>">
</head>
<body>
  <div class="grid-bg"></div>
  <div class="scanlines"></div>

  <nav>
    <a href="index.html" class="logo">EASYENCLAVE</a>
    <ul class="nav-links">
      <li><a href="quickstart.html">Quickstart</a></li>
      <li><a href="concepts.html">Concepts</a></li>
      <li><a href="sdk.html">SDK</a></li>
      <li><a href="action.html">GitHub Action</a></li>
      <li><a href="https://github.com/anthropics/easyenclave" target="_blank">GitHub</a></li>
    </ul>
  </nav>

  <main class="docs-container">
    <h1>// CONCEPTS</h1>
    <p>Understanding the trust model behind EasyEnclave.</p>

    <h2>The Problem</h2>
    <p>How do you know the server you're talking to is running the code you expect?</p>
    <ul>
      <li><strong>TLS certificates</strong> prove domain ownership, not what code is running</li>
      <li><strong>Container signatures</strong> prove image integrity, not that the signed image is what's deployed</li>
      <li><strong>Trust the cloud provider?</strong> That's still trusting someone</li>
    </ul>

    <div class="callout callout-info">
      EasyEnclave solves this with <strong>hardware attestation</strong> + <strong>GitHub as the trust anchor</strong>.
    </div>

    <h2>What is Intel TDX?</h2>
    <p><strong>Trust Domain Extensions (TDX)</strong> is Intel's confidential computing technology. It creates isolated virtual machines (Trust Domains) with:</p>
    <ul>
      <li><strong>Memory encryption</strong> - Even the hypervisor can't read TD memory</li>
      <li><strong>Hardware attestation</strong> - Cryptographic proof of what's running</li>
      <li><strong>Measurement registers (RTMRs)</strong> - Hash chain of boot components</li>
    </ul>

    <h3>The TDX Quote</h3>
    <p>When a TD requests an attestation, the CPU generates a <strong>quote</strong> containing:</p>
    <pre data-lang="text"><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           TDX QUOTE                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RTMR0: Firmware measurement         â”‚
â”‚ RTMR1: OS/Kernel measurement        â”‚
â”‚ RTMR2: Application measurement      â”‚
â”‚ RTMR3: Runtime data                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Report Data: Custom payload (nonce) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Signature: Intel CPU attestation    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

    <p>This quote is <strong>signed by the CPU itself</strong>. You can verify it through Intel's attestation infrastructure (DCAP) to prove:</p>
    <ol>
      <li>The quote came from genuine Intel TDX hardware</li>
      <li>The measurements match expected values</li>
      <li>The TD hasn't been tampered with</li>
    </ol>

    <h2>GitHub as Trust Anchor</h2>
    <p>Traditional attestation requires complex PKI. EasyEnclave uses GitHub instead:</p>

    <pre data-lang="text"><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Your Repo      â”‚      â”‚   TDX Host       â”‚
â”‚                  â”‚      â”‚                  â”‚
â”‚ docker-compose   â”‚â”€â”€â”€â”€â”€â–¶â”‚ Deploy to TD     â”‚
â”‚                  â”‚      â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ Generate Quote   â”‚
                          â”‚ (TDX Hardware)   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub Release   â”‚â—€â”€â”€â”€â”€â”€â”‚ Publish          â”‚
â”‚                  â”‚      â”‚ Attestation      â”‚
â”‚ attestation.json â”‚      â”‚                  â”‚
â”‚ - quote (base64) â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - endpoint       â”‚
â”‚ - rtmrs          â”‚
â”‚ - sealed flag    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client SDK       â”‚
â”‚                  â”‚
â”‚ 1. Fetch release â”‚
â”‚ 2. Verify quote  â”‚
â”‚ 3. Connect       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

    <h3>Why GitHub?</h3>
    <ul>
      <li><strong>Identity</strong> - Your repo already IS your service identity</li>
      <li><strong>Releases</strong> - Immutable, versioned, auditable</li>
      <li><strong>No PKI</strong> - GitHub handles authentication, you don't need certificates</li>
      <li><strong>Transparency</strong> - Anyone can verify your attestations</li>
    </ul>

    <h2>The Security Model</h2>

    <h3>What You Trust</h3>
    <ul>
      <li><strong>Intel TDX</strong> - Hardware attestation is correct</li>
      <li><strong>GitHub</strong> - Releases aren't tampered with</li>
      <li><strong>Intel DCAP</strong> - Quote verification infrastructure</li>
    </ul>

    <h3>What You Don't Need to Trust</h3>
    <ul>
      <li><strong>Cloud provider</strong> - Memory encrypted, they can't see your data</li>
      <li><strong>Host OS</strong> - TD is isolated from hypervisor</li>
      <li><strong>Network</strong> - Attestation verified cryptographically</li>
      <li><strong>EasyEnclave operators</strong> - Verification is end-to-end</li>
    </ul>

    <h2>Sealed vs Unsealed</h2>

    <div class="callout callout-warning">
      <strong>Sealed Mode (Production)</strong>
      <ul>
        <li>SSH disabled</li>
        <li>Serial console disabled</li>
        <li>No way in except through your app</li>
        <li>What's deployed is what runs</li>
      </ul>
    </div>

    <div class="callout callout-info">
      <strong>Unsealed Mode (Development)</strong>
      <ul>
        <li>SSH access available</li>
        <li>Debug logging enabled</li>
        <li>Attestation marked as "unsealed"</li>
        <li>Clients can choose to reject unsealed services</li>
      </ul>
    </div>

    <h2>Verification Flow</h2>
    <p>When you call <code>connect("owner/repo")</code>, the SDK:</p>
    <ol>
      <li><strong>Fetches</strong> the latest release from GitHub</li>
      <li><strong>Extracts</strong> the TDX quote from attestation.json</li>
      <li><strong>Verifies</strong> the quote signature via Intel DCAP</li>
      <li><strong>Validates</strong> RTMRs against expected measurements</li>
      <li><strong>Checks</strong> the sealed flag (configurable)</li>
      <li><strong>Returns</strong> a verified HTTP client</li>
    </ol>

    <pre data-lang="python"><code><span class="keyword">from</span> easyenclave <span class="keyword">import</span> connect, VerificationError

<span class="keyword">try</span>:
    <span class="comment"># All verification happens here</span>
    client = <span class="function">connect</span>(<span class="string">"owner/repo"</span>)
<span class="keyword">except</span> VerificationError <span class="keyword">as</span> e:
    <span class="comment"># Quote invalid, measurements don't match, etc.</span>
    print(<span class="string">f"Attestation failed: {e}"</span>)</code></pre>

    <h2>Network Architecture</h2>
    <pre data-lang="text"><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Control Plane                   â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ WebSocket   â”‚â—€â”€â”€â”€â”‚ Agent (TD VM)           â”‚â”‚
â”‚  â”‚ Tunnel      â”‚    â”‚ - Your workload         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â”‚ - Attestation agent     â”‚â”‚
â”‚         â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚         â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚ Proxy/Route â”‚â”€â”€â”€â”€â”€â”€â–¶ your-app.easyenclave.comâ”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

    <ul>
      <li><strong>Agents</strong> connect outbound via WebSocket (no inbound ports)</li>
      <li><strong>Control plane</strong> routes traffic to verified agents</li>
      <li><strong>Re-attestation</strong> happens periodically (default: 60 min)</li>
    </ul>

    <h2>Next Steps</h2>
    <ul>
      <li><a href="quickstart.html">Try the quickstart</a></li>
      <li><a href="sdk.html">Read the SDK docs</a></li>
      <li><a href="action.html">Configure the GitHub Action</a></li>
    </ul>
  </main>

  <footer>
    <p><a href="index.html">EasyEnclave</a> Â· <a href="https://github.com/anthropics/easyenclave">GitHub</a></p>
  </footer>

  <script src="js/main.js"></script>
</body>
</html>
